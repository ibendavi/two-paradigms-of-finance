{% extends "base.html" %}
{% set active_page = 'home' %}

{% block content %}
<!-- Hero -->
<section class="hero">
  <div class="hero-year-badge">MODIGLIANI &amp; MILLER, 1958</div>

  <h1>The Two Paradigms</h1>
  <p class="hero-subtitle">of Finance</p>

  <div class="divergence-visual">
    <svg viewBox="0 0 600 200" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Divergence cone (shaded area) -->
      <path d="M300 80 Q380 100 570 30 L570 170 Q380 100 300 80 Z"
            fill="url(#cone-gradient)" opacity="0.08"/>
      <defs>
        <linearGradient id="cone-gradient" x1="300" y1="80" x2="570" y2="80" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="#a78bfa" stop-opacity="0.4"/>
          <stop offset="100%" stop-color="#a78bfa" stop-opacity="0.02"/>
        </linearGradient>
      </defs>

      <!-- Common trunk (pre-1958) -->
      <line x1="30" y1="100" x2="300" y2="100" stroke="#94a3b8" stroke-width="2" class="draw-path" opacity="0.5"/>

      <!-- Split point (pulsing) -->
      <circle cx="300" cy="100" r="5" fill="#a78bfa" class="split-pulse"/>

      <!-- Academic branch (blue, curves upward) -->
      <path d="M300 100 C380 95, 450 50, 570 30" stroke="#5ba4cf" stroke-width="2.5" fill="none" class="draw-path delay"/>
      <!-- Practitioner branch (gold, curves downward) -->
      <path d="M300 100 C380 105, 450 150, 570 170" stroke="#d4a017" stroke-width="2.5" fill="none" class="draw-path delay"/>

      <!-- Terminal labels -->
      <text x="575" y="30" fill="#5ba4cf" font-family="'JetBrains Mono', monospace" font-size="11" dominant-baseline="middle">NPV / DCF</text>
      <text x="575" y="170" fill="#d4a017" font-family="'JetBrains Mono', monospace" font-size="11" dominant-baseline="middle">EPS / Comps</text>

      <!-- Year markers -->
      <text x="30" y="125" fill="#706a5a" font-family="'JetBrains Mono', monospace" font-size="9">1720</text>
      <text x="290" y="125" fill="#a78bfa" font-family="'JetBrains Mono', monospace" font-size="9">1958</text>
      <text x="555" y="125" fill="#706a5a" font-family="'JetBrains Mono', monospace" font-size="9">today</text>
    </svg>
  </div>

  <!-- Two-column paradigm display -->
  <div class="paradigm-columns">
    <div class="paradigm-col practitioner">
      <div class="paradigm-col-label">The Practitioner</div>
      <div class="paradigm-col-formula">P = EPS &times; P/E</div>
      <div class="paradigm-col-desc">The method that survived.</div>
    </div>
    <div class="paradigm-divider"></div>
    <div class="paradigm-col academic">
      <div class="paradigm-col-label">The Academic</div>
      <div class="paradigm-col-formula">P = &Sigma; CF/(1+r)<sup>t</sup></div>
      <div class="paradigm-col-desc">The method that replaced it in theory.</div>
    </div>
  </div>

  <p class="lead">
    For 200 years, everyone valued stocks the same way: capitalize earnings at a market yield.
    Then Modigliani &amp; Miller changed the theory. But practitioners never changed their practice.
    This is the story — told through 300 years of primary sources.
  </p>
  <p class="scroll-hint">Scroll to discover the evidence</p>
</section>

<!-- Scroll Timeline -->
<section class="scroll-timeline">

  {% set current_era = {'id': ''} %}
  {% for moment in moments %}

  {# Era divider #}
  {% if moment.era != current_era.id %}
  {% if moment.era == 'consensus' %}
  <div class="era-label">
    <span class="era-badge">Act I: Everyone Agreed</span>
    <span class="era-years">1720 – 1957</span>
  </div>
  {% elif moment.era == 'revolution' %}
  <div class="era-label">
    <span class="era-badge">Act II: The Revolution</span>
    <span class="era-years">1952 – 1963</span>
  </div>
  {% elif moment.era == 'divergence' %}
  <div class="era-label">
    <span class="era-badge">Act III: The Great Divergence</span>
    <span class="era-years">1964 – present</span>
  </div>
  {% endif %}
  {% set _ = current_era.update({'id': moment.era}) %}
  {% endif %}

  {# Moment card #}
  <div class="moment-card {{ 'left' if loop.index is odd else 'right' }} paradigm-{{ moment.paradigm }}">
    <div class="moment-year">{{ moment.year }}</div>
    <div class="moment-author">{{ moment.author }} — <em>{{ moment.title }}</em></div>
    <div class="moment-quote">{{ moment.quote }}</div>
    {% if moment.note is defined and moment.note %}
    <a href="{{ root }}evidence/{{ moment.note.slug }}.html" class="moment-link">Read the evidence &rarr;</a>
    {% elif moment.note_slug is defined %}
    <a href="{{ root }}evidence/{{ moment.note_slug }}.html" class="moment-link">Read the evidence &rarr;</a>
    {% endif %}
  </div>
  {% endfor %}

  <!-- Coda -->
  <div class="era-label">
    <span class="era-badge">The Question</span>
  </div>
  <div class="moment-card left paradigm-transitional" style="width: calc(100% - 2.5rem); margin-left: auto; margin-right: auto;">
    <div class="moment-author">Was the Revolution Wrong?</div>
    <div class="moment-quote">
      Not wrong — just incomplete. Modigliani-Miller's logic is correct given their assumptions.
      But the assumed objective function (maximize NPV of cash flows) doesn't match what managers
      and investors actually do. The "old" approach (maximize EPS, price = earnings x multiple)
      persisted because it works — not because practitioners are ignorant of theory.
    </div>
    <a href="{{ root }}two-paradigms.html" class="moment-link">Compare the two paradigms &rarr;</a>
  </div>

</section>
{% endblock %}
